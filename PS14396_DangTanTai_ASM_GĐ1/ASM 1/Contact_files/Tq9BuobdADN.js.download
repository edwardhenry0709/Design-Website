if (self.CavalryLogger) { CavalryLogger.start_js(["FpPjR"]); }

__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],(function(a,b,c,d,e,f){a.SubscriptionLevels=b("SubscriptionLevels"),a.EditSubscriptions=b("EditSubscriptions")}),3);
__d("FriendStatus",["Arbiter","AsyncRequest","SubscribeButton","createArrayFromMixed","forEachObject"],(function(a,b,c,d,e,f){var g=function(){"use strict";function a(a,b){this.lists=null,this.id=a,this.update(b)}var c=a.prototype;c.update=function(a,c){a&&(this.status=a),c&&(this.lists=b("createArrayFromMixed")(c).map(String),this.$1())};c.isComplete=function(){return!!this.lists};c.addToList=function(a){this.lists&&!this.lists.includes(a)&&this.lists.push(a),this.$1()};c.removeFromList=function(a){if(this.lists){a=this.lists.indexOf(a);a!==-1&&this.lists&&this.lists.splice(a,1)}this.$1()};c.updateList=function(a,b){b?this.addToList(a):this.removeFromList(a)};c.$1=function(){b("Arbiter").inform("FriendListMembershipChange",{uid:this.id,lists:this.lists})};a.getFriend=function(c,d){h[c]&&h[c].isComplete()?d(h[c]):i[c]?i[c].push(d):(i[c]=[d],new(b("AsyncRequest"))().setURI("/ajax/friends/status.php").setData({friend:c}).setHandler(function(b){b=b.getPayload();window.setTimeout(a.initFriend.bind(a,c,b.status,b.lists),0)}).send())};a.initFriend=function(b,c,d){var e=h[b]||new a(b);e.update(e.status||c,e.lists||d);h[b]=e;i[b]&&i[b].forEach(function(a){a(e)});i[b]=null};a.setSpecialLists=function(c){var d=a.CLOSE_FRIENDS===null;a.CLOSE_FRIENDS=c.close+"";a.ACQUAINTANCES=c.acq+"";d&&b("forEachObject")(h,function(a,b){a.$1()})};return a}();g.ARE_FRIENDS=1;g.INCOMING_REQUEST=2;g.OUTGOING_REQUEST=3;g.CAN_REQUEST=4;g.CLOSE_FRIENDS=null;g.ACQUAINTANCES=null;var h={},i={};function a(a,c,d){!h[d.uid]?h[d.uid]=new g(d.uid,a):h[d.uid].update(a),b("Arbiter").inform("FriendRequest/change",{uid:d.uid,status:a})}(c=b("Arbiter")).subscribe(["FriendRequest/cancel","FriendRequest/unfriend"],function(a,c){c.profile_id=c.uid,c.connected=!1,b("Arbiter").inform(b("SubscribeButton").UNSUBSCRIBED,c)});c.subscribe(["FriendRequest/cancel","FriendRequest/unfriend","FriendRequest/sendFail"],a.bind(null,g.CAN_REQUEST));c.subscribe(["FriendRequest/confirmFail"],a.bind(null,g.INCOMING_REQUEST));c.subscribe(["FriendRequest/cancelFail","FriendRequest/sent","FriendRequest/sending"],a.bind(null,g.OUTGOING_REQUEST));c.subscribe(["FriendRequest/confirm","FriendRequest/confirming"],a.bind(null,g.ARE_FRIENDS));e.exports=g}),null);
__d("XAddFriendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/add_friend/action/",{action:{type:"String"},friendlists:{type:"HackType",defaultValue:[]},to_friend:{type:"Int"},how_found:{type:"String"},ref_param:{type:"String"},http_referer:{type:"String"},logging_location:{type:"String"},ego_log_data:{type:"String"},source:{type:"String"},link_data:{type:"HackType",defaultValue:[]},frefs:{type:"HackType",defaultValue:[]},floc:{type:"String"},accept_tag_education:{type:"Bool",defaultValue:!1}})}),null);
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","XAddFriendController","$","ge"],(function(a,b,c,d,e,f){var g,h=5,i={},j="/ajax/profile/removefriendconfirm.php",k="/ajax/friends/requests/cancel.php",l="/profile.php",m,n,o,p,q={profile_browser:43,fbx_top_bar:1,hovercard:5};function r(a,c,d){var e=i[a.id],f=function(f){f=b("XAddFriendController").getURIBuilder().setString("action",d?"add_list":"del_list").setInt("to_friend",e.id).setHackType("friendlists",[c]).setString("source",m).setBool("accept_tag_education",!!f&&!!f.accept_tag_education).getURI();e.updateList(c,d);var g;d&&c==b("FriendStatus").CLOSE_FRIENDS?(g=u(a,b("FriendStatus").ACQUAINTANCES),b("MenuDeprecated").isItemChecked(g)&&(b("MenuDeprecated").toggleItem(g),r(a,b("FriendStatus").ACQUAINTANCES,!1))):d&&c==b("FriendStatus").ACQUAINTANCES&&(g=u(a,b("FriendStatus").CLOSE_FRIENDS),b("MenuDeprecated").isItemChecked(g)&&(b("MenuDeprecated").toggleItem(g),r(a,b("FriendStatus").CLOSE_FRIENDS,!1)));g={flid:c,uid:e.id};var h=d?"FriendListHovercard/add":"FriendListHovercard/remove";b("Arbiter").inform(h,g);new(b("AsyncRequest"))().setURI(f).send()};f()}function s(a){a=b("DOMQuery").scry(a,"input")[0];return a&&a.value}function t(a,c,d){if(b("CSS").hasClass(d,"async_saving"))return;var e={uid:c.id};new(b("AsyncRequest"))().setURI(k).setMethod("POST").setData({friend:c.id,cancel_ref:o,floc:p}).setHandler(function(){return b("Arbiter").inform("FriendRequest/cancel",e)}).setErrorHandler(function(){return b("Arbiter").inform("FriendRequest/cancelFail",e)}).setStatusElement(d).send()}function u(a,c){a=b("MenuDeprecated").getItems(a);for(var d=0;d<a.length;d++)if(s(a[d])==c)return a[d];return null}function v(a,c){a=b("MenuDeprecated").getItems(a);a.forEach(function(a){var d=s(a);d=c.lists.includes(d);b("MenuDeprecated").isItemChecked(a)!==d&&b("MenuDeprecated").toggleItem(a)})}function w(a){var c=b("MenuDeprecated").getItems(a),d=!b("CSS").hasClass(a,"followButtonFlyout")&&!b("CSS").hasClass(a,"likeButtonFlyout"),e=[],f=[],g=0,i=0;c.forEach(function(a){b("CSS").hasClass(a,"neverHide")?(b("CSS").removeClass(a,"underShowMore"),g++):b("MenuDeprecated").isItemChecked(a)?e.push(a):b("CSS").hasClass(a,"neverShow")||b("CSS").hasClass(a,"FriendListCreateTrigger")||!d&&b("CSS").hasClass(a,"friendOptionsOnly")?(b("CSS").addClass(a,"underShowMore"),i++):f.push(a)});var j=h-g;c=e.concat(f);var k=i;c.forEach(function(a){if(b("CSS").hasClass(a,"ShowMoreItem")){j--;return}j?(b("CSS").removeClass(a,"underShowMore"),j--):(b("CSS").addClass(a,"underShowMore"),k=!0)});b("CSS").conditionClass(a,"hasMoreFriendListItems",k);c=b("DOMQuery").scry(a,".FriendListMenuShowMore");c.forEach(function(a){b("CSS").removeClass(a,"FriendListMenuShowMore")})}function x(a,c){b("CSS").conditionClass(a,"FriendListMemorializedUser",c)}function y(a,c){var d=b("DOMQuery").scry(a,".FriendListUnfriend")[0],e=b("DOMQuery").scry(a,".FriendListCancel")[0],f=b("DOMQuery").scry(a,".FriendListFriendship")[0];e&&b("CSS").conditionShow(e,c.status==b("FriendStatus").OUTGOING_REQUEST);if(d){b("CSS").conditionShow(d,c.id!==void 0&&c.status===b("FriendStatus").ARE_FRIENDS);d=b("DOMQuery").find(d,"a");d.setAttribute("ajaxify",new(g||(g=b("URI")))(j).addQueryData({uid:c.id,unref:n,floc:p}).toString())}else b("CSS").conditionClass(a,"NoFriendListActionSeparator",!e||c.status!=b("FriendStatus").OUTGOING_REQUEST);f&&(b("CSS").conditionShow(f,c.status==b("FriendStatus").ARE_FRIENDS),b("DOMQuery").find(f,"a").setAttribute("href",new(g||(g=b("URI")))(l).addQueryData({and:c.id}).toString()))}function z(a,c,d){var e=b("DOMQuery").scry(a,"div.FriendListSubscriptionsMenu");e.length!==0&&b("EditSubscriptions").init(a,c,d)}b("Arbiter").subscribe("FriendRequest/change",function(a,c){for(var d in i){a=b("ge")(d);var e=i[d];a&&e&&e.id==c.uid&&(v(a,e),y(a,e),w(a))}});b("MenuDeprecated").subscribe("select",function(a,c){b("CSS").hasClass(c.item,"ShowMoreItem")&&b("CSS").hasClass(c.menu,"FriendListMenu")&&(b("CSS").addClass(c.menu,"FriendListMenuShowMore"),b("ScrollableArea").poke(c.item))});c={init:function(a,c,d,e,f,g,h){a=b("$")(a);m=d;n=f;o=g;p=h;var j=q[d]||45;i[a.id]||b("MenuDeprecated").subscribe("select",function(c,d){if(b("DOMQuery").contains(a,d.item))if(b("Parent").byClass(d.item,"FriendListItem")){b("MenuDeprecated").toggleItem(d.item);c=s(d.item);r(a,c,b("MenuDeprecated").isItemChecked(d.item))}else b("Parent").byClass(d.item,"FriendListCancel")?t(a,i[a.id],d.item):b("Parent").byClass(d.item,"FriendListUnfriend")&&b("Arbiter").inform("FriendEditLists/unfriend")});b("CSS").addClass(a,"async_saving");b("FriendStatus").getFriend(c,function(d){x(a,e),v(a,d),y(a,d),i[a.id]=d,w(a),z(a,c,j),b("CSS").removeClass(a,"async_saving")}.bind(this))}};e.exports=a.FriendEditLists||c}),null);
__d("XFriendListFlyoutContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/friends/lists/flyout_content/",{})}),null);
__d("FriendListFlyoutController",["csx","cx","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","DOM","DOMQuery","Event","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent_DEPRECATED","XFriendListFlyoutContentController","emptyFunction","getActiveElement","ifRequired"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=null,m=null,n,o,p,q,r,s=1500,t,u=!1,v=["uiButtonConfirm","uiButtonSpecial","_42gz","_42g-","_4jy2","_51tl","_4jy1"],w={init:function(a,c){w.init=b("emptyFunction");i=a;i.subscribe("mouseenter",F);i.subscribe("mouseleave",function(){u||U()});i.subscribe("hide",H);i.enableBehavior(b("LayerTabIsolation"));i.enableBehavior(b("LayerHideOnEscape"));t=c;l&&b("DOM").setContent(i.getContent(),[l,m]);a=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a?(u=!0,n!==a&&(k&&W(),T(a))):u&&W()};c=function(a){a=b("Parent").byClass(a.getTarget(),"enableFriendListFlyout");a&&(n===a?window.clearTimeout(q):(k&&W(),T(a)))};b("Event").listen(document.documentElement,{click:a,mouseover:c,keydown:function(a){var c=a.getTarget();if(a.getModifiers().any)return;if(!k||b("DOMQuery").isNodeOfType(c,["input","textarea"]))return;var d=b("Event").getKeyCode(a),e;switch(d){case b("Keys").UP:case b("Keys").DOWN:var f=E();e=C(f);A(f[e+(d===b("Keys").UP?-1:1)]);return!1;case b("Keys").SPACE:f=B(c);f&&(x(f),a.prevent());break;default:c=String.fromCharCode(d).toLowerCase();f=E();e=C(f);a=e;d=f.length;while(e>=0&&(a=++a%d)!==e){var g=b("MenuDeprecated").getItemLabel(f[a]);if(g&&g.charAt(0).toLowerCase()===c){A(f[a]);return!1}}}}});b("Arbiter").subscribe("FriendEditLists/unfriend",W);b("Arbiter").subscribe("FriendRequest/cancel",W)},initContent:function(a){b("DOM").appendContent(document.body,a),I(a),window.setTimeout(function(){!l?(l=a,i&&b("DOM").setContent(i.getContent(),[l,m]),b("CSS").show(l),b("Event").listen(l,"click",X),k&&Q(n)):(b("DOM").remove(a),a=null)},0)},initNux:function(a){if(m)return;m=a;i&&b("DOM").setContent(i.getContent(),[l,m])},show:function(a){R(a)},hide:function(a){a===!1?W():U()},resetActiveNode:function(){n=null},setActiveNode:function(a){k&&W(),n=a,o=b("Event").listen(a,"mouseleave",function(){n=null,o&&o.remove()})},setCloseListener:function(a,c){b("DataStore").set(a,"flfcloselistener",c),n!=a&&b("DataStore").set(a,"flfcloselistenertimeout",window.setTimeout(Y.bind(null,a),s))},setCloseListenerTimeout:function(a){s=a}};function x(a){b("UserAgent_DEPRECATED").firefox()&&z(a).blur(),b("MenuDeprecated").inform("select",{menu:y(a),item:a})}function y(a){return b("CSS").hasClass(a,"uiMenuContainer")?a:b("Parent").byClass(a,"uiMenu")}function z(a){return b("DOMQuery").find(a,"a.itemAnchor")}function A(a){a&&D(a)&&(b("MenuDeprecated").$removeSelected(i.getContent()),b("CSS").addClass(a,"selected"),z(a).focus())}function B(a){return b("Parent").byClass(a,"uiMenuItem")}function C(a){var c=b("getActiveElement")();if(c){c=B(c);return a.indexOf(c)}return-1}function D(a){return!b("CSS").hasClass(a,"disabled")&&b("Style").get(a,"display")!=="none"&&b("Style").get(b("Parent").byClass(a,"uiMenu"),"display")!=="none"}function E(){return b("MenuDeprecated").getItems(i.getContent()).filter(D)}function F(){window.clearTimeout(q)}function G(a){for(var c=0;c<v.length;c++)if(b("CSS").hasClass(a,v[c]))return!1;return!0}function H(){if(n){G(n)&&(b("CSS").removeClass(n,"_52nd"),(b("CSS").hasClass(n,"uiButton")||b("CSS").matchesSelector(n,"._42fu"))&&b("CSS").removeClass(n,"selected"));if(b("DataStore").get(n,"flfcloselistener")){var a=n;b("DataStore").set(n,"flfcloselistenertimeout",window.setTimeout(Y.bind(null,a),s))}}k=!1;P();n=null}function I(a){a=b("DOMQuery").scry(a,'[tabindex="0"]');a.forEach(function(a){a.tabIndex="-1"});a[0]&&(a[0].tabIndex="0")}function J(a){b("DOMQuery").isNodeOfType(a,"label")&&b("CSS").hasClass(a,"uiButton")&&(a=b("Button").getInputElement(a));return a}function K(a){return b("DataStore").get(J(a),"profileid")}function L(a){return b("DataStore").get(J(a),"memorialized")==="true"}function M(a){return b("DataStore").get(J(a),"unref")}function N(a){return b("DataStore").get(J(a),"cancelref")}function O(a){return b("DataStore").get(J(a),"floc")}function P(){o&&o.remove(),o=null,r&&b("Layer").unsubscribe(r),r=null,q&&window.clearTimeout(q),q=null}function Q(a){var c=K(a),d=L(a),e=b("DataStore").get(a,"flloc"),f=M(a),g=N(a),h=O(a);b("FriendEditLists").init(l,c,e,d,f,g,h);b("CSS").conditionClass(l,"followButtonFlyout",b("CSS").hasClass(a,"profileFollowButton"));b("CSS").conditionClass(l,"friendButtonFlyout",b("CSS").hasClass(a,"FriendRequestFriends")||b("CSS").hasClass(a,"FriendRequestIncoming")||b("CSS").hasClass(a,"FriendRequestOutgoing"));b("CSS").conditionClass(l,"likeButtonFlyout",b("CSS").hasClass(a,"profileLikeButton"));c=b("DOMQuery").scry(l,"div.uiScrollableArea")[0];c&&b("ScrollableArea").poke(c);e=b("TabbableElements").find(l)[0];e&&e.focus()}function R(a){if(!i||k)return;i.setContext(a);i.setCausalElement(a);a.setAttribute("aria-expanded","true");G(a)&&(b("CSS").addClass(a,"_52nd"),(b("CSS").hasClass(a,"uiButton")||b("CSS").matchesSelector(a,"._42fu"))&&b("CSS").addClass(a,"selected"));i.show();n=a;k=!0;var c=null;if(l)c="show",Q(a);else{c="init_show";var d=parseInt(K(a),10);if(d){d=b("XFriendListFlyoutContentController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setStatusElement(i.getContent()).send()}}P();o=b("Event").listen(a,"mouseleave",U);r=b("Layer").subscribe("show",S);b("DataStore").get(a,"flfcloselistener")&&window.clearTimeout(b("DataStore").remove(a,"flfcloselistenertimeout"));d=K(a);b("FriendStatus").getFriend(d,function(d){d.status==b("FriendStatus").ARE_FRIENDS&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_log.php").setData({target_id:K(a),unref:M(a),action:c}).send();if(!m)return;d.status==b("FriendStatus").OUTGOING_REQUEST?(b("CSS").show(m),b("AsyncRequest").bootstrap("/ajax/friends/lists/nux_flyout.php",null,!0)):b("CSS").hide(m)});(!j||a.id!==j.id)&&(b("Arbiter").inform("listeditor/close_editor"),b("Arbiter").inform("friend-list/close_editor"));j=a}function S(a,c){(!(c instanceof b("ContextualLayer"))||!b("DOMQuery").contains(n,c.getContext()))&&U()}function T(a){n=a,p=window.setTimeout(R.bind(null,a),t),o=b("Event").listen(a,"mouseleave",function(){window.clearTimeout(p),n=null,o&&o.remove()})}function U(){q=window.setTimeout(W,150)}function V(){var a=b("ifRequired")("Dialog",function(a){return a});if(a){a=a.getCurrent();return a&&b("DOMQuery").scry(a,".friendListDialogTourCarousel")[0]}}function W(){if(V())return;u=!1;if(i){i.hide();var a=i.getCausalElement();a&&a.setAttribute("aria-expanded","false")}}function X(a){a=b("Parent").byTag(a.getTarget(),"a");a&&b("CSS").hasClass(a,"FriendListActionItem")&&U()}function Y(a){a=b("DataStore").remove(a,"flfcloselistener");a&&a()}e.exports=a.FriendListFlyoutController||w}),null);
__d("XProfileViewAsFriendRequestPromptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/show_friend_request_viewas_prompt/",{})}),null);
__d("AddFriendButton",["Arbiter","AsyncRequest","AsyncResponse","Banzai","CSS","DOMQuery","Event","FriendListFlyoutController","FriendStatus","Style","SubscribeButton","XAddFriendController","XProfileViewAsFriendRequestPromptController","XPubcontentChainedSuggestionsController","collectDataAttributes","ge","getVendorPrefixedName","goURI"],(function(a,b,c,d,e,f){var g={ERROR_ALREADY_ADDED:1431005,init:function(a){var c=a.root,d=a.profileId,e=a.uriAfterFriend,f=a.howFound,h=a.refParam,i=a.loggingLocation,j=a.noFlyoutOnClick,k=a.egoLogData,l=a.highlightSent,m=a.httpReferer,n=a.chainPymk,o=a.friendingLocation,p=a.friendingLocationRefs,q=a.xOutButton,r=a.showViewasFriendRequestPrompt,s=c.id,t=null,u=(a=b("DOMQuery")).scry(c,".addButton")[0],v=a.scry(c,".addFriendText")[0],w=a.scry(c,".outgoingButton")[0],x=a.scry(c,".incomingButton")[0],y=a.scry(c,".friendButton")[0],z=a.scry((a=c.parentNode)==null?void 0:(a=a.parentNode)==null?void 0:a.parentNode,".friend_status_confirmed")[0],A=b("DOMQuery").scry(c.parentNode,".suggestFriendsButton")[0];function B(a,e,g){var j=b("collectDataAttributes")(c,["ft","gt"]);j=b("XAddFriendController").getURIBuilder().setInt("to_friend",d).setString("action",a).setString("how_found",f).setString("ref_param",h).setHackType("link_data",j).setString("logging_location",i).setString("ego_log_data",k).setString("http_referer",m).setString("floc",o).setHackType("frefs",p).getURI();new(b("AsyncRequest"))().setURI(j).setErrorHandler(e).setServerDialogCancelHandler(g).setRelativeTo(w).send();if(n&&a==="add_friend"){j=b("XPubcontentChainedSuggestionsController").getURIBuilder().setInt("friendid",d).getURI();new(b("AsyncRequest"))().setURI(j).send()}r&&H();b("Arbiter").inform(b("SubscribeButton").SUBSCRIBED,{profileId:d.toString(),connected:!0,chaining:!1})}function C(a,d){v?b("CSS").hide(v):u&&(q&&b("CSS").hide(q),b("CSS").hide(u));w&&b("CSS").hide(w);x&&b("CSS").hide(x);y&&b("CSS").hide(y);a&&(b("CSS").show(a),q&&"Requestable"===d&&b("CSS").show(q));if("Outgoing"===d&&t!==d&&l){var e=b("getVendorPrefixedName")("transition"),f=b("Style").get(a,e),g={backgroundColor:"transparent",borderColor:b("Style").get(a,"borderLeftColor")};g[e]="2s";var h=b("Event").listen(a,b("getVendorPrefixedName")("transitionend"),function(){b("Style").apply(a,{transitionProp:f}),h.remove()});b("Style").apply(a,g)}"Requestable"===d&&t!==d&&(A&&b("CSS").hide(A));t&&b("CSS").removeClass(c,"fStatus"+t);t=d;b("CSS").addClass(c,"fStatus"+d);b("FriendListFlyoutController").resetActiveNode()}function D(a){b("CSS").hasClass(a,"enableFriendListFlyout")?b("FriendListFlyoutController").show(a):b("FriendListFlyoutController").hide()}var E=b("Arbiter").subscribe("FriendRequest/change",function(a,c){I();if(c.uid!=d)return;switch(c.status){case b("FriendStatus").ARE_FRIENDS:return C(y,"Friends");case b("FriendStatus").INCOMING_REQUEST:return C(x,"Incoming");case b("FriendStatus").OUTGOING_REQUEST:return C(w,"Outgoing");case b("FriendStatus").CAN_REQUEST:z&&b("CSS").hide(z);return C(v?v:u,"Requestable")}}),F=b("Arbiter").subscribe("FriendRequest/unfriend",function(a,c){I(),c.uid==d&&c.shouldHideButton===!0&&b("CSS").hide(u)}),G;e&&(G=b("Arbiter").subscribe("FriendRequest/confirm",function(a,c){I(),c.uid==d&&b("goURI")(e)}));u&&b("Event").listen(u,"click",function(){b("Arbiter").inform("FriendRequest/sending",{uid:d}),j?b("FriendListFlyoutController").setActiveNode(w):D(w),B("add_friend",function(a){var c=a.error===g.ERROR_ALREADY_ADDED?"FriendRequest/sent":"FriendRequest/sendFail";b("Arbiter").inform(c,{uid:d});b("FriendListFlyoutController").hide();b("AsyncResponse").defaultErrorHandler(a)},function(){b("Arbiter").inform("FriendRequest/sendFail",{uid:d}),b("FriendListFlyoutController").hide()})});function H(){if(b("ge")("profileEscapeHatchContentID")){var a=b("XProfileViewAsFriendRequestPromptController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).send();b("Banzai").post("view_as_friend_request_prompt",{event:"impression"})}}function I(){if(b("ge")(s))return;E&&E.unsubscribe();G&&G.unsubscribe();F&&F.unsubscribe();E=null;G=null;F=null}}};e.exports=g}),null);
__d("XEgoHideLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:!0},qid:{type:"Int",required:!0},mf_story_key:{type:"Int",required:!0},service_id:{type:"String",required:!0}})}),null);
__d("PymkXout",["Arbiter","AsyncSignal","CSS","DOM","DOMQuery","Event","PymkFunnelLogger","XEgoHideLoggingController"],(function(a,b,c,d,e,f){a={init:function(a,c,d){b("Event").listen(c,"click",function(c){this._logForEgo(a);(d==="pymk_jewel"||d==="pymk_jewel_first_page"||d==="friends_center")&&this._logForPymkFunnel(a,d);d==="pymk_jewel"||d==="pymk_jewel_first_page"?b("CSS").hide(a):b("DOM").remove(a);b("Arbiter").inform("pymk-x-out",{location:d});c=c.getTarget().getAttribute("data-pymk-id");c&&b("Arbiter").inform("x-out-ego-suggestions",{id:c})}.bind(this))},_logForEgo:function(a){a=a.getAttribute("data-ft");a=a==null?null:JSON.parse(a);if(a&&a.ego_id){a=b("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",a.ego_id).setInt("qid",a.qid).setInt("mf_story_key",a.mf_story_key).setString("service_id","PYMK").getURI();new(b("AsyncSignal"))(a,{}).send()}},_logForPymkFunnel:function(a,c){var d=b("DOMQuery").find(a,"input.friendBrowserID");d=parseInt(d.value,10);a=parseInt(a.getAttribute("data-signature"),10);b("PymkFunnelLogger").logXOut(d,a,c)}};e.exports=a}),null);
__d("Optimus",["Event","Parent"],(function(a,b,c,d,e,f){"use strict";var g={};function h(a,c){var d=c.getTarget();if(!d)return;var e=g[a];for(var f in e){var h=b("Parent").byAttribute(d,f);if(h)do{var i=e[f][h.getAttribute(f)];if(i&&i.handleOptimus(a,h,c)===!1)break}while(h=h.parentNode&&b("Parent").byAttribute(h.parentNode,f))}}function i(c,d,f,a){g[c]||(g[c]={},b("Event").listen(document.documentElement,c,h.bind(null,c))),g[c][d]||(g[c][d]={}),g[c][d][f]||(g[c][d][f]=a)}e.exports={addRelClick:function(b,a){i("click","rel",b,a)},addEventListener:i}}),null);
__d("FriendButtonIcon",["Arbiter","Button","FriendStatus"],(function(a,b,c,d,e,f){e.exports={register:function(a,c,d){b("Arbiter").subscribe("FriendListMembershipChange",function(e,f){if(f.uid==d){e=f.lists.includes(b("FriendStatus").CLOSE_FRIENDS);f=f.lists.includes(b("FriendStatus").ACQUAINTANCES);e&&!f?b("Button").setIcon(a,c.close):f&&!e?b("Button").setIcon(a,c.acquaintance):b("Button").setIcon(a,c.friend)}})}}}),null);
__d("FriendListMenu",["Arbiter","AsyncRequest","CSS","DOM","Event","Focus","HTML","Input","Keys","MenuDeprecated","Parent"],(function(a,b,c,d,e,f){a={init:function(a){b("MenuDeprecated").register(a,!1);var c=b("DOM").find(a,".FriendListCreateTrigger"),d=b("DOM").find(a,".CreateListInputItem"),e=b("DOM").find(d,".createListInput");b("MenuDeprecated").subscribe("select",function(d,f){f.item==c&&(b("CSS").addClass(a,"FriendListMenuCreate"),b("Focus").set(e))});b("Event").listen(e,"blur",function(c){b("Input").isEmpty(e)&&b("CSS").removeClass(a,"FriendListMenuCreate")});b("Event").listen(e,"keydown",function(c){b("Event").getKeyCode(c)==b("Keys").RETURN&&/[^\s]/.test(e.value)&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/create.php").setData({name:e.value,id:a.id}).setHandler(function(){b("Input").reset(e),b("CSS").removeClass(a,"FriendListMenuCreate")}).send()});b("Arbiter").subscribe("friend-list/new",function(d,e){d=b("HTML")(e.new_li).getRootNode();b("DOM").insertBefore(c,d);e.id===a.id?(b("MenuDeprecated").focusItem(d),b("MenuDeprecated").inform("select",{menu:b("Parent").byClass(d,"uiMenu"),item:d})):b("MenuDeprecated").toggleItem(d)});b("Arbiter").subscribe("friend-list/close_editor",function(){var c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})},addToAnotherList:function(a,c){b("Event").listen(a,"click",function(c){c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsClosed");b("CSS").addClass(c,"addToListsOpen")})},goBack:function(a,c){b("Event").listen(a,"click",function(c){c=b("Parent").byClass(a,"FlyoutFriendMenu");b("CSS").removeClass(c,"addToListsOpen");b("CSS").addClass(c,"addToListsClosed")})}};e.exports=a}),null);
__d("RestrictedFriendListEducation",["Arbiter","AsyncRequest"],(function(a,b,c,d,e,f){var g,h;function i(a,c){if(c.flid==g)if(a=="FriendListHovercard/add"){if(h)return;h=!0;new(b("AsyncRequest"))().setURI("/ajax/friends/lists/restricted_edu.php").setData({target:c.uid,flid:c.flid}).send()}else a=="RestrictedListNUX/okay"&&new(b("AsyncRequest"))().setURI("/ajax/friends/lists/nux_log.php").setData(c).send();return!0}a={init:function(a){g=a,b("Arbiter").subscribe(["FriendListHovercard/add","RestrictedListNUX/okay"],i)}};e.exports=a}),null);
__d("ProfileActionBarLogger",["FBJSON","MarauderLogger","Optimus"],(function(a,b,c,d,e,f){function a(){b("Optimus").addEventListener("mouseup","data-loggable","ProfileHighQualityLogger",{handleOptimus:function(a,c,d){b("MarauderLogger").log("profile_high_quality_action",null,b("FBJSON").parse(c.getAttribute("data-store")));return!1}})}f.init=a}),null);
__d("ProfileEscapeHatch",["Arbiter","CSS","ProfileTabUtils","Run"],(function(a,b,c,d,e,f){var g=[],h=!1;function i(a){g.forEach(function(c){b("CSS").conditionShow(c.getRoot(),!b("ProfileTabUtils").isOverviewTab(a))})}a=function(){"use strict";function a(a){this.$1=a;g.push(this);if(!h){var c=b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(a,b){return i(b[0])});b("Run").onLeave(function(){g=[],c.unsubscribe()});h=!0}}var c=a.prototype;c.getRoot=function(){return this.$1};return a}();e.exports=a}),null);
__d("XProfileTilesLogDismissController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/tiles/log/dismiss/",{section_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("ProfileTileActions",["csx","cx","AsyncRequest","CSS","Event","XProfileTilesLogDismissController","tidyEvent"],(function(a,b,c,d,e,f,g,h){a={addCollapseListeners:function(a,c){var d=a.querySelector("._3vay");d!==null&&b("tidyEvent")(b("Event").listen(d,"click",function(d){b("CSS").addClass(a,"_65tv");d=b("XProfileTilesLogDismissController").getURIBuilder().setEnum("section_type",c);new(b("AsyncRequest"))().setURI(d.getURI()).setMethod("POST").send()}))}};e.exports=a}),null);
__d("TimelineContextItemLogger",["cx","BanzaiLogger","Event","FBJSON","Parent","Run","tidyEvent"],(function(a,b,c,d,e,f,g){var h="MTimelineXContextItemsLoggerConfig",i="impression",j="click",k="context_item_url",l="event",m="_md0",n=[];function o(a,c,d){a=a.getAttribute("data-store");if(a){a=b("FBJSON").parse(a);a[l]=c;d&&(a[k]=d);b("BanzaiLogger").log(h,a)}}a={logWhenVisible:function(a){n.length||b("Run").onLeave(function(){n=[]}),n.push(a)},logWhenClicked:function(a){b("tidyEvent")(b("Event").listen(a,"click",function(a){a=a.getTarget();if(a.nodeName!=="A")return;var c=b("Parent").byClass(a,m);c&&o(c,j,a.href)}))},listenToExpand:function(a){b("tidyEvent")(a.addListener("expanded",function(){while(n.length)o(n.pop(),i)}))}};e.exports=a}),null);
__d("TimelineNavLight",["csx","cx","invariant","Arbiter","CSS","DataStore","DOM","DOMQuery","Event","Parent","ProfileEngagementTypedLogger","ProfileOverviewSection","ProfileTabUtils","ProfileTimelineUILogger","TimelineAppSectionConstants","destroyOnUnload","queryThenMutateDOM","requireWeak"],(function(a,b,c,d,e,f,g,h,i){var j="_6-7",k="_6-6",l="_529n",m="_9rw",n="_70k",o="._6-7",p="._6-6";a=function(){"use strict";function a(c){var d=this;a.$5&&i(0,5609);this.$1=c;this.$2=b("DOMQuery").scry(c,o)[0];this.$3=b("DOMQuery").scry(c,p);this.$6();b("ProfileOverviewSection").subscribe("Medley/transitionToSection",function(a,b){d.$7(b.slice("pagelet_timeline_medley_".length))});var e=b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(a,b){return d.$7(b[0])}),f=b("Event").listen(this.$1,"click",this.$8.bind(this));a.$5=this;b("destroyOnUnload")(function(){d.$1=null,d.$2=null,d.$3=null,f.remove(),e.unsubscribe(),d.$4&&d.$4.remove(),a.$5=null})}var c=a.prototype;c.setMoreMenuInstance=function(a){this.$4=b("Event").listen(a.getRoot(),"click",this.$9.bind(this))};a.setMoreMenuInstance=function(b){!a.$5&&i(0,5610),a.$5.setMoreMenuInstance(b)};c.$7=function(a){var c=this;this.$2&&b("CSS").removeClass(this.$2,j);var d=this.$3;d&&d.some(function(d){var e=b("TimelineAppSectionConstants").collectionTabKeyToAppTabKey[a]||a,f=b("TimelineAppSectionConstants").alternateCollectionTabKeyToAppTabKey[a];if(b("DataStore").get(d,"tab-key")===e||b("DataStore").get(d,"tab-key")===f){b("CSS").addClass(d,j);c.$2=d;return!0}return!1});(b("ProfileTabUtils").isTimelineTab(a)||b("ProfileTabUtils").isTimelineOverviewTab(a))&&b("requireWeak")("ScrollColumnEvents",function(a){b("Arbiter").inform(a.EVENT_SHOULD_ADJUST)})};c.$6=function(){var a=this.$3,c=this.$1,d,e;b("queryThenMutateDOM")(function(){if(!c||!a)return;var f=b("Parent").byClass(c,n);f instanceof HTMLElement&&(d=parseInt(getComputedStyle(f).width,10));e=a.map(function(a){a=a.offsetWidth;return a})},function(){if(!e||!a||!c)return;var f=b("Parent").byClass(c,l);f!==null&&b("CSS").removeClass(f,l);f=e.reduce(function(a,b){return a+b},0);if(f<d)return;f=f-d;var g=e.length-2;while(f>0&&g>0)b("DOM").remove(a[g]),f-=e[g],g--})};c.$10=function(a,c){a=b("Parent").byClass(a,c);return a?b("DataStore").get(a,"tab-key"):null};c.$8=function(a){a=this.$10(a.target,k);a&&b("ProfileTimelineUILogger").logCoverNavItemClick(a)};c.$9=function(a){a=this.$10(a.target,m);a&&b("ProfileTimelineUILogger").logCoverNavMoreItemClick(a)};a.setupProfileOverviewLogging=function(a){var c=a.dropdownMenu,d=a.profileID,e=a.profileSessionID,f=a.surface;c.onTriggerClick(function(a){new(b("ProfileEngagementTypedLogger"))().setEngagementType("timeline_navigation_click").setItemType("dropdown_button").setProductBucket("profile_core").setProfileIDDummy(d).setProfileSessionID(e).setSurface(f).log()});c.onMenuItemClick(function(a){new(b("ProfileEngagementTypedLogger"))().setEngagementType("timeline_navigation_click").setItemType("dropdown_menu_item").setItemSubtype(a.getValue()).setProductBucket("profile_core").setProfileIDDummy(d).setProfileSessionID(e).setSurface(f).log()})};return a}();e.exports=a}),null);
__d("TimelineViewportTracking",["csx","Arbiter","Banzai","DataAttributeUtils","DOM","ViewportTracking","$","tidyEvent","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){return{_stream:null,_streamDOMID:c,getDataFromConfig:function(a,c){c.isSeenStateLoggingEnabled=a.is_seen_state_logging_enabled,c.isTimetrackingEnabled=a.is_timetracking_enabled,c.vpvdDebug=!!a.vpvd_debug,b("tidyEvent")(b("Arbiter").subscribe(["TimelineConstants/unitSegmentLoaded"],function(){c.invalidateAllStoriesCache()}))},getAllStories:function(){var a=b("DOM").scry(this.getStream(),"._5pat"),c=[];for(var d=0;d<a.length;d++)this.getStoryID(a[d])&&c.push(a[d]);return c},getStream:function(){this._stream||(this._stream=b("$")(this._streamDOMID));return this._stream},getStoryID:function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a)||null);if(a){var c="thid";return a[c]}return null},getDataToLog:function(a){a=JSON.parse(b("DataAttributeUtils").getDataFt(a));return{ft:a,log_type:"impression"}}}}var i=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.getTimetrackingDataToLog=function(a){a=c.prototype.getTimetrackingDataToLog.call(this,a);a.log_type="duration";return a};d.getAllStoriesFromCache=function(){return this.behavior.getAllStories()};d.sendDataToLog=function(a,c,d,e){if(!c.ft)return;a={};e&&(a.retry=e);d&&(a.delay=2e3);b("Banzai").post("timeline_feed_tracking",c,a)};d.cleanup=function(){j.clearSingleton(),c.prototype.cleanup.call(this)};return a}(b("ViewportTracking")),j=b("viewportTrackingBuilder")(function(a,b){b=new i(h(a,b));b.init(a);return b});j.init=j.singleton.bind(j);e.exports=j}),null);